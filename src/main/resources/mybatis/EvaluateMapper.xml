<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.uml.dao.EvaluateMapper">
    <select id="getAllEvaluateByListingId" parameterType="int" resultType="com.uml.model.Evaluate">
        select evaluate.id,
               evaluate.user_id,
               evaluate.listing_id,
               evaluate.mark_id,
               users.username,
               mark.score,
               evaluate.content
        from evaluate
                 LEFT JOIN users on evaluate.user_id = users.id
                 LEFT JOIN mark on mark.id = evaluate.mark_id
        WHERE evaluate.listing_id = #{listing_id}
        group by evaluate.id
        order by evaluate.id desc
    </select>
</mapper>